import { AnimatePresence, motion } from "framer-motion";

import "./LogoLoader.css";
import { useState } from "react";

type LogoLoaderProps = {
  isVisible: boolean;
};

const LogoLoader: React.FC<LogoLoaderProps> = ({ isVisible }) => {
  const [hasPlayedFirstAnimation, setHasPlayedFirstAnimation] = useState(false);

  return (
    <AnimatePresence>
      {isVisible && (
        <motion.div
          className="absolute left-0 top-0 flex h-screen w-screen  items-center justify-center bg-[--color-secondary]"
          exit={{ opacity: 0, transition: { duration: 1 } }}
        >
          <motion.div
            className="flex flex-col items-center gap-2 "
            // initial={{ opacity: 0, scale: 0.95, translateY: -20 }}
            // animate={{ opacity: 1, scale: 1, translateY: -15 }}
            // transition={{ duration: 1.8, ease: "easeInOut" }}
          >
            <motion.svg
              width="60"
              height="44"
              viewBox="0 0 50 38"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={"block"}
              initial={{ scale: 0, rotate: -180, opacity: 0 }}
              animate={
                !hasPlayedFirstAnimation
                  ? { rotate: 0, scale: 1, opacity: 1 }
                  : {
                      rotate: [0, -8, 0, 8, 0],
                      opacity: 1,
                      scale: [1, 1.05, 1, 1.05, 1],
                      transition: { duration: 1, repeat: Infinity },
                    }
              }
              onAnimationComplete={() => setHasPlayedFirstAnimation(true)}
              transition={{
                type: "spring",
                stiffness: 260,
                damping: 20,
              }}
              exit={{
                opacity: 0,
                scale: 0,
                rotate: 180,
                transition: { duration: 0.3 },
              }}
            >
              <motion.path
                d="M49.9834 7.03784V31.3405L30.1768 33.4955L25.8307 37.6447C25.3306 38.1223 24.5419 38.1178 24.047 37.6348L19.8057 33.4955L0.000976562 31.3405V7.03784L3.09915 7.66747L12.917 9.66076H37.0678L46.8837 7.66747L49.9838 7.03784H49.9834Z"
                fill="#899CF8"
              />
              <path
                d="M46.876 7.66651V29.1527L49.9716 7.03784L46.876 7.66651Z"
                fill="#6F85EB"
              />
              <path
                d="M3.09432 29.1708V7.66747L0 7.03784L3.09432 29.1708Z"
                fill="#6F85EB"
              />
              <path
                d="M24.9893 6.7067C27.211 4.91217 31.2815 3.70886 35.938 3.70886C40.5926 3.70886 44.6631 4.91217 46.8849 6.7067V29.4666C44.6631 27.6721 40.5926 26.469 35.938 26.469C31.2815 26.469 27.211 27.6723 24.9893 29.4666V6.7067Z"
                fill="#899CF8"
              />
              <path
                d="M24.9861 6.70724V29.4677C22.7645 27.6718 18.6946 26.4701 14.0398 26.4701C12.0899 26.4701 10.2452 26.68 8.59578 27.0549C6.3011 27.5781 4.38345 28.4234 3.08984 29.4675V6.70705C3.09525 6.70319 3.09911 6.69971 3.10489 6.69585C3.63341 6.26845 4.26517 5.87674 4.9851 5.52979C5.33571 5.35729 5.70871 5.19616 6.09868 5.04604C8.27721 4.20994 11.0367 3.70959 14.04 3.70959C18.6948 3.70959 22.7647 4.91309 24.9863 6.70705L24.9861 6.70724Z"
                fill="#899CF8"
              />
              <path
                d="M25.0118 8.32141C24.9946 8.33288 24.9772 8.34648 24.9619 8.35987L25.0059 8.31567L25.0116 8.32141H25.0118Z"
                fill="#DCE3E7"
              />
              <path
                d="M28.3286 32.0436H21.6396L24.4034 35.3654C24.6745 35.6911 25.1732 35.6958 25.4504 35.3751L28.3288 32.0434L28.3286 32.0436Z"
                fill="#EFF6FF"
              />
              <path
                d="M28.3286 32.0432H21.6396V1.37947C21.6396 0.617667 22.2571 0 23.0191 0H26.9495C27.7114 0 28.3288 0.617667 28.3288 1.37947V32.0432H28.3286Z"
                fill="#EFF6FF"
              />
              <path
                d="M46.8906 29.1529H29.584C30.0228 28.7981 30.5519 28.4735 31.1562 28.1848C31.5304 28.0075 31.9331 27.8435 32.3601 27.6949C34.0134 27.122 36.0426 26.7839 38.2356 26.7839C41.9151 26.7839 45.1332 27.7339 46.8904 29.1529H46.8906Z"
                fill="#EFF6FF"
              />
              <path
                d="M20.6582 29.171H3.08984C4.87222 27.7304 8.13828 26.7657 11.8742 26.7657C14.0992 26.7657 16.1593 27.1077 17.8367 27.6891C18.2714 27.84 18.6807 28.0063 19.0605 28.1865C19.6756 28.4812 20.2128 28.8106 20.6584 29.171H20.6582Z"
                fill="#EFF6FF"
              />
              <path
                d="M26.7309 32.1068H23.2288C22.9567 32.1068 22.8082 32.424 22.982 32.6332L24.3217 34.2432C24.6467 34.6338 25.2445 34.6392 25.5766 34.2548L26.974 32.6376C27.1536 32.4296 27.006 32.1066 26.7311 32.1066L26.7309 32.1068Z"
                fill="#899CF8"
              />
              <path
                d="M26.7325 32.1069H25.3658C25.6406 32.1069 25.7884 32.43 25.6087 32.638L24.2734 34.1834L24.3234 34.2434C24.6484 34.634 25.2462 34.6394 25.5782 34.255L26.9757 32.6378C27.1553 32.4298 27.0077 32.1068 26.7327 32.1068L26.7325 32.1069Z"
                fill="#6F85EB"
              />
              <path
                d="M22.5938 31.0918V5.20225C22.5938 4.96587 22.7859 4.77368 23.0223 4.77368H26.9527C27.1887 4.77368 27.3811 4.96587 27.3811 5.20225V31.0918H22.5939H22.5938Z"
                fill="#F75F54"
              />
              <path
                d="M26.96 4.77368H25.4902V31.0918H27.3884V5.20225C27.3884 4.96587 27.1962 4.77368 26.96 4.77368Z"
                fill="#D6645A"
              />
              <path
                d="M22.5938 4.02277V1.84502C22.5938 1.2781 23.0532 0.818665 23.6201 0.818665H26.3548C26.9215 0.818665 27.3811 1.2781 27.3811 1.84502V4.02277H22.5939H22.5938Z"
                fill="#899CF8"
              />
              <path
                d="M27.3781 1.84522V4.02394H25.4008V1.84522C25.4008 1.27868 24.9427 0.818665 24.376 0.818665H26.3513C26.9178 0.818665 27.3779 1.27868 27.3779 1.84522H27.3781Z"
                fill="rgb(111, 133, 235)"
              />
              <path
                d="M10.0423 16.3108C10.0423 16.7895 9.65411 17.1777 9.17537 17.1777C8.69664 17.1777 8.30859 16.7895 8.30859 16.3108C8.30859 15.832 8.69664 15.4438 9.17537 15.4438C9.65411 15.4438 10.0423 15.832 10.0423 16.3108Z"
                fill="#EFF6FF"
              />
              <path
                d="M13.7982 16.3108C13.7982 16.7895 13.4102 17.1777 12.9314 17.1777C12.4527 17.1777 12.0645 16.7895 12.0645 16.3108C12.0645 15.832 12.4527 15.4438 12.9314 15.4438C13.4102 15.4438 13.7982 15.832 13.7982 16.3108Z"
                fill="#EFF6FF"
              />
              <path
                d="M17.5677 16.3109C17.5677 16.7896 17.1797 17.1779 16.7008 17.1779C16.222 17.1779 15.834 16.7896 15.834 16.3109C15.834 15.8321 16.222 15.4439 16.7008 15.4439C17.1797 15.4439 17.5677 15.8321 17.5677 16.3109Z"
                fill="#EFF6FF"
              />
              <path
                d="M37.1036 11.0824C34.3432 11.1623 32.0898 13.605 32.0898 16.3663V21.1729C32.0898 21.5004 32.4858 21.6642 32.717 21.4326L33.9407 20.2089C34.9449 21.0502 36.2729 21.5177 37.7112 21.3946C40.201 21.1816 42.2122 19.1549 42.4075 16.6636C42.6498 13.5703 40.1658 10.9938 37.1036 11.0824Z"
                fill="#EFF6FF"
              />
            </motion.svg>

            <motion.div
              className="block"
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              transition={{ delay: 0.2, ease: "easeInOut", duration: 3 }}
              exit={{ opacity: 0, transition: { duration: 0.2 } }}
            >
              <div className="dot-flashing"></div>
            </motion.div>
          </motion.div>
        </motion.div>
      )}
    </AnimatePresence>
  );
};

export default LogoLoader;
